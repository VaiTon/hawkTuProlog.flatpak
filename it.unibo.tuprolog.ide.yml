id: it.unibo.tuprolog.ide
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
  - "org.freedesktop.Sdk.Extension.openjdk17"
command: tuprolog-ide
finish-args:
  - "--env=PATH=/app/jre/bin:/app/bin:/usr/bin"
  - "--env=JAVA_HOME=/app/jre"
  - "--share=ipc"
  - "--socket=x11"
  - "--device=dri"
  - "--filesystem=home"
modules:
  - name: "openjdk"
    buildsystem: "simple"
    build-commands:
      - "/usr/lib/sdk/openjdk17/install.sh"
  - name: 2p-ide
    buildsystem: simple
    build-commands:
      - install -Dm0664 -t ${FLATPAK_DEST}/ tuprolog-ide.jar
      - install -Dm0775 -t ${FLATPAK_DEST}/bin/ tuprolog-ide
      - install -Dm0664 -t ${FLATPAK_DEST}/share/applications/ it.unibo.tuprolog.ide.desktop
      - install -Dm0664 -t ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/ it.unibo.tuprolog.ide.svg
    sources:
      - type: file
        url: https://github.com/tuProlog/2p-kt/releases/download/1.0.4/2p-ide-1.0.4-redist.jar
        sha256: e1cf2a1b66fcba179b0167d1d3f30d586ceecee6244ce4427e93c654b459e79b
        dest-filename: tuprolog-ide.jar
      - type: file
        url: https://raw.githubusercontent.com/tuProlog/2p-kt/refs/tags/1.0.4/.img/logo.svg
        sha256: 136d1f65e008d75f36cbdfcacd2c5fa5b3508ad7e29a7b6aea665978b848c944
        dest-filename: it.unibo.tuprolog.ide.svg
      - type: file
        path: it.unibo.tuprolog.ide.desktop
      - type: file
        path: tuprolog-ide
